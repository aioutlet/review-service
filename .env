# =============================================================================
# Review Service Local Development Configuration
# =============================================================================
# This file is used for VS Code debugging when infrastructure runs in Docker
# Copied to .env automatically by scripts/deploy.sh local

# =============================================================================
# Service Configuration
# =============================================================================
NODE_ENV=development
PORT=3006
SERVICE_NAME=review-service
SERVICE_VERSION=1.0.0

# =============================================================================
# Database Configuration
# =============================================================================
# Connects to Docker infrastructure
MONGODB_URI=mongodb://admin:admin123@localhost:27018/review_service_local_db?authSource=admin

# =============================================================================
# Service Discovery
# =============================================================================
# Infrastructure services
AUTH_SERVICE_URL=http://localhost:3001
USER_SERVICE_URL=http://localhost:3002
PRODUCT_SERVICE_URL=http://localhost:8000
INVENTORY_SERVICE_URL=http://localhost:5000
ORDER_SERVICE_URL=http://localhost:5001
PAYMENT_SERVICE_URL=http://localhost:5002
ADMIN_SERVICE_URL=http://localhost:3010
AUDIT_SERVICE_URL=http://localhost:9000

# =============================================================================
# Message Broker Configuration
# =============================================================================
# Connects to Docker infrastructure
RABBITMQ_URL=amqp://admin:admin123@localhost:5672

# =============================================================================
# Cache Configuration
# =============================================================================
# Connects to Docker infrastructure
REDIS_URL=redis://:redis_dev_pass_123@localhost:6379/0

# =============================================================================
# Security Configuration
# =============================================================================
JWT_SECRET=7a9f2d84b3c6e1f8a5d7c2b9e6f4a1d8c5b2e9f6a3d0c7b4e1f8a5d2c9b6e3f0a7
JWT_EXPIRE=24h
BCRYPT_SALT_ROUNDS=12

# =============================================================================
# CORS Configuration
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002,http://localhost:3010

# =============================================================================
# Review Service Specific Configuration
# =============================================================================
# Review moderation settings
AUTO_APPROVE_VERIFIED_USERS=true
MAX_REVIEW_LENGTH=5000
MIN_REVIEW_LENGTH=10
REQUIRE_PURCHASE_VERIFICATION=true

# Rating configuration
MIN_RATING=1
MAX_RATING=5
ALLOW_HALF_RATINGS=false

# Media upload settings
ALLOW_REVIEW_IMAGES=true
MAX_IMAGES_PER_REVIEW=5
MAX_IMAGE_SIZE_MB=5
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,webp

# Review limits
MAX_REVIEWS_PER_USER_PER_DAY=10
REVIEW_EDIT_TIME_LIMIT_HOURS=24

# =============================================================================
# Development Settings
# =============================================================================
DEBUG=true

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=debug
LOG_FORMAT=console
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_FILE_PATH=./logs/review-service-local.log

# =============================================================================
# Observability Configuration  
# =============================================================================
# Tracing
ENABLE_TRACING=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# Correlation ID
CORRELATION_ID_HEADER=x-correlation-id

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# Review creation limits
REVIEW_CREATE_WINDOW_MS=900000
REVIEW_CREATE_MAX_REQUESTS=10

# Vote limits
REVIEW_VOTE_WINDOW_MS=60000
REVIEW_VOTE_MAX_REQUESTS=20

# Flag limits
REVIEW_FLAG_WINDOW_MS=900000
REVIEW_FLAG_MAX_REQUESTS=5

# Analytics limits
ANALYTICS_WINDOW_MS=60000
ANALYTICS_MAX_REQUESTS=50

# =============================================================================
# External API Configuration
# =============================================================================
# Content moderation service (if using external)
CONTENT_MODERATION_API_URL=
CONTENT_MODERATION_API_KEY=

# Image processing service
IMAGE_PROCESSING_API_URL=
IMAGE_PROCESSING_API_KEY=

# =============================================================================
# Notification Configuration
# =============================================================================
# Review notification settings
NOTIFY_ON_NEW_REVIEW=true
NOTIFY_ON_REVIEW_APPROVED=true
NOTIFY_ON_REVIEW_REJECTED=true
NOTIFY_ON_HELPFUL_VOTE=false
